#Attribute Funciton (Attack Damage) - 적용 : 검, 도끼
#item = 적용할 아이템
#min/maxamount = 최소/최대값
#baseamount = 기본값
#예제 : addAttackDamageModifier({_i}, 2, 5, 10) = Item에 Attack Damage를 2 ~ 5를 추가한다. 해당 아이템의 기본 값은 10

function AttackDamageModifier(item: item, minamount: integer, maxamount: integer, baseamount: integer):
	set {_randomAmount} to random integer between {_minamount} and {_maxamount}
	add "&rATK + %{_randomAmount}%" to lore of {_item}
	set {_finalAmount} to {_randomAmount} + {_baseamount} - 1
	apply attribute modifier to {_item}:
		attribute: attack damage
		id: "attackdamage"
		slot: mainhand_slot_group
		amount: {_finalAmount}
		operation: add_integer
	return {_item}

#Attribute Funciton (Attack Speed) - 적용 : 검, 도끼
#item = 적용할 아이템
#min/maxamount = 최소/최대값
#예제 : AttackSpeedModifier(({_i}, 2, 5) = Item에 Attack Speed를 2% ~ 5% 추가한다.

function AttackSpeedModifier(item: item, minamount: integer, maxamount: integer):
	set {_randomAmount} to random integer between {_minamount} and {_maxamount}
	add "DLY - %{_randomAmount}%%%" to lore of {_item}
	set {_scaledAmount} to {_randomAmount} / 100
	apply attribute modifier to {_item}:
		attribute: attack speed
		id: "attackspeed"
		slot: mainhand_slot_group
		amount: {_scaledAmount}
		operation: add_scalar
	return {_item}

#Attribute Funciton (MaxHealth) - 적용 : 갑옷, 방패
#item = 적용할 아이템
#min/maxamount = 최소/최대값
#예제 : MaxHealthAttributeModifier(({_i}, 2, 5, "head_slot_group") = Item을 "head_slot_group"에 착용했을 때 maxHealth를 2 ~ 5 추가한다.
function MaxHealthAttributeModifier(item: item, minamount: integer, maxamount: integer, slotGroup: string):
	set {_randomAmount} to random integer between {_minamount} and {_maxamount}
	add "MaxHealth + %{_randomAmount}%" to lore of {_item}
	set {_scaledAmount} to {_randomAmount} * 2  # 필요에 따라 값 조정 가능
	apply attribute modifier to {_item}:
		attribute: max health
		id: "maxhealth"
		slot: {_slotGroup}
		amount: {_scaledAmount}
		operation: add_integer
	return {_item}

#Attribute Funciton (MaxHealth) - 적용 : 갑옷
#item = 적용할 아이템
#min/maxamount = 최소/최대값
#예제 : ArmorToughnessAttributeModifier(({_i}, 2, 5, "head_slot_group") = Item을 "head_slot_group"에 착용했을 때 ArmorToughness를 2 ~ 5 추가한다.
function ArmorToughnessAttributeModifier(item: item, minamount: integer, maxamount: integer, slotGroup: string):
	set {_randomAmount} to random integer between {_minamount} and {_maxamount}
	add "Armor Toughness + %{_randomAmount}" to lore of {_item}
	apply attribute modifier to {_item}:
		attribute: armor toughness
		id: "armortoughness-%now%"
		slot: {_slotGroup}
		amount: {_randomAmount}
		operation: add_integer
	
	return {_item}

command /test:
	trigger:
		if player is op:
			set {_item} to netherite sword with nbt from "{""max_damage"":10155,""damage"":0,""repair_cost"":999,""custom_model_data"":1,""custom_data""={""tag:skinitem""}}"
			 add "" to lore of {_item}
			
			chance of 90%:
				addAttackDamageModifier({_item}, 1, 10, 8) #네더라이트 검의 데미지는 8
			
			chance of 90%:
				set {_amount} to random integer between 1 and 4
				add "ATK + %{_amount}%" to lore of {_item}
				set {_amount} to {_amount} + 7
				apply attribute modifier to {_item}:
					attribute: attack damage
					id: "attackdamage"
					slot: mainhand_slot_group
					amount: {_amount}
					operation: add_integer


			give player 1 of {_item}
